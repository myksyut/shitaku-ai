---
name: docs-auto-updater
description: コード変更に基づいてドキュメント更新の必要性を判断し、更新提案を生成する。
---

# docs-auto-updater スキル

コード変更に基づいてドキュメント更新の必要性を判断し、更新提案を生成するためのガイドライン。

## 更新判断基準

コード変更を分析し、以下の基準に従ってドキュメント更新の必要性を判断する。

### 1. 関数/メソッドのシグネチャ変更
- **更新対象**: docs/api.md、docs/backend.md
- **更新内容**:
  - パラメータの追加・削除・変更を反映
  - 戻り値の型変更を記載
  - 使用例を更新または追加
  - エラーハンドリングの変更があれば記載

### 2. 新機能追加
- **更新対象**: 該当する仕様書（specification.md、api.md、frontend.md等）
- **更新内容**:
  - 機能の概要説明を追加
  - 具体的な使用例・コードサンプルを提供
  - 関連する既存機能との関係性を明記
  - 必要に応じて図表を追加

### 3. 設定オプション変更
- **更新対象**: docs/backend.md、docs/infra.md、該当する設定ガイド
- **更新内容**:
  - 新しい設定項目の説明と推奨値を追加
  - デフォルト値の変更を明記
  - 環境変数の変更を反映
  - 設定例を更新

### 4. 破壊的変更
- **更新対象**: CHANGELOG.md（優先）、該当する仕様書
- **更新内容**:
  - 変更の性質を明確に記載（BREAKING CHANGE）
  - 移行ガイドを提供
  - 影響範囲を具体的に説明
  - バージョン情報と日付を記録

### 5. データベーススキーマ変更
- **更新対象**: docs/db.md
- **更新内容**:
  - テーブル構造の変更を反映
  - 新しいインデックスやリレーションを追加
  - マイグレーション手順の注意事項を記載

### 6. UIコンポーネント・画面変更
- **更新対象**: docs/frontend.md
- **更新内容**:
  - コンポーネントの説明を更新
  - 画面遷移図の修正
  - Props/Stateの変更を反映

## 作業プロセス

1. **変更内容の分析**:
   - 提供されたコード変更を詳細に確認
   - 影響を受けるドキュメントをリストアップ
   - 更新の優先度を判断（破壊的変更 > API変更 > 内部実装変更）

2. **ドキュメントの特定**:
   - docs/ディレクトリの構造を理解
   - 複数のドキュメントに影響する場合は、すべてをリストアップ
   - 整合性を保つため、関連ドキュメント間の矛盾がないか確認

3. **更新内容の作成**:
   - 既存の記述スタイルとフォーマットに合わせる
   - 技術的に正確で、わかりやすい日本語で記述
   - コードサンプルは実際に動作する例を提供
   - 必要に応じて「注意」「重要」などの強調表示を使用

4. **品質チェック**:
   - Markdown構文の正確性を確認
   - リンク切れがないかチェック
   - コードブロックの言語指定が正しいか確認
   - 用語の一貫性を保つ

## コミットサジェスチョン形式（PRレビュー時）

ドキュメント更新が必要な場合、以下の形式でコメントを生成する：

```markdown
## ドキュメント更新サジェスチョン

このPRのコード変更に基づき、以下のドキュメント更新を提案します。

### {ファイル名}

**変更理由**: {なぜこの更新が必要か}

**推奨される変更内容**:
```suggestion
{具体的な修正内容}
```

---

[他のファイルも同様に記載]
```

## 重要な注意事項

- **日本語で出力**: すべてのドキュメント更新は日本語で行う
- **段階的な更新**: 大規模な変更の場合は、複数のステップに分けて更新を提案
- **既存情報の保持**: 不要な情報の削除は慎重に行い、必要に応じてユーザーに確認
